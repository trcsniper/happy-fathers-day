<!DOCTYPE html>
<html>
	<head>
		<title>Happy Father's Day!</title>

		<style>
			.variable-label {
				font-family: 'Times New Roman', Times, serif;
				font-style: italic;
			}

			.variable-value {
				font-weight: bold;
			}

			#parallax-stack {
				position: relative;
				width: 100px;
				height: 100px;
			}

			.parallax {
				position: absolute;
				left: 0px;
				top: 0px;
			}
		</style>

		<script>
			var parallaxParent;
			var parallaxElements;

			window.onload = function() {
				parallaxParent = document.getElementById("parallax-stack");
				parallaxElements = parallaxParent.getElementsByClassName("parallax");

				if (window.DeviceOrientationEvent) {
					window.addEventListener(
						"deviceorientation",
						function () {
							document.getElementById("device-alpha").innerText = Math.round(event.alpha) + " deg";
							document.getElementById("device-beta").innerText = Math.round(event.beta) + " deg";
							document.getElementById("device-gamma").innerText = Math.round(event.gamma) + " deg";
							tilt([event.beta, event.gamma]);
						},
						true
						);
				}
				
				if (window.DeviceMotionEvent) {
					window.addEventListener(
						"devicemotion",
						function (event) {
							document.getElementById("device-x").innerText = Math.round(event.acceleration.x) + " m/s^2";
							document.getElementById("device-y").innerText = "" + Math.round(event.acceleration.y) + " m/s^2";
							document.getElementById("device-z").innerText = "" + Math.round(event.acceleration.z) + " m/s^2";

							document.getElementById("device-dalpha").innerText = Math.round(event.rotationRate.alpha) + " deg/s";
							document.getElementById("device-dbeta").innerText = "" + Math.round(event.rotationRate.beta) + " deg/s";
							document.getElementById("device-dgamma").innerText = "" + Math.round(event.rotationRate.gamma) + " deg/s";
							
							//tilt([event.acceleration.x * 2, event.acceleration.y * 2]);
						},
						true
						);
				}
			}
			
			function tilt(x, y) {
				Array.prototype.forEach.call(
					parallaxElements,
					function(element) {
						var scale = element.getAttribute("parallax-scale");
						element.style.transform = "translate(" + x * scale + ", " + y * scale + ")";
					}
					);
			}
		</script>
	</head>
	<body>
		<div id="parallax-stack">
			<div class="parallax" style="background-color: #f0f; width: 100px; height: 100px;" parallax-scale="0.5"></div>
			<div class="parallax" style="background-color: #0f0; width: 50px; height: 50px;" parallax-scale="1"></div>
			<div class="parallax" style="background-color: #0ff; width: 25px; height: 25px;" parallax-scale="1.5"></div>
		</div>
		<p>Device Orientation<br /><span class="variable-label">α</span>: <span id="device-alpha" class="variable-value">0</span>, <span class="variable-label">β</span>: <span id="device-beta" class="variable-value">0</span>, <span class="variable-label">γ</span>: <span id="device-gamma" class="variable-value">0</span></p>
		<p>Device Acceleration<br /><span class="variable-label">x</span>: <span id="device-x" class="variable-value">0</span>, <span class="variable-label">y</span>: <span id="device-y" class="variable-value">0</span>, <span class="variable-label">z</span>: <span id="device-z" class="variable-value">0</span></p>
		<p>Device Rotation<br /><span class="variable-label">δα</span>: <span id="device-dalpha" class="variable-value">0</span>, <span class="variable-label">δβ</span>: <span id="device-dbeta" class="variable-value">0</span>, <span class="variable-label">δγ</span>: <span id="device-dgamma" class="variable-value">0</span></p>
	</body>
<html>
